<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="David&#39;s blogs">
<meta property="og:url" content="http://davidwang.club/index.html">
<meta property="og:site_name" content="David&#39;s blogs">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="David&#39;s blogs">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://davidwang.club/"/>





  <title>David's blogs</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">David's blogs</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-search">
          <a href="/search" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            æœç´¢
          </a>
        </li>
      
        
        <li class="menu-item menu-item-something">
          <a href="/something" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            something
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            å…¬ç›Š404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://davidwang.club/2018/05/24/LuaSDKç†è§£/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="David">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/image/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="David's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/24/LuaSDKç†è§£/" itemprop="url">LuaSDKç†è§£</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-05-24T22:06:07+08:00">
                2018-05-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="LuaView-ç¬¬ä¸€ç‰ˆSDKçš„ç†è§£"><a href="#LuaView-ç¬¬ä¸€ç‰ˆSDKçš„ç†è§£" class="headerlink" title="LuaView  ç¬¬ä¸€ç‰ˆSDKçš„ç†è§£"></a>LuaView  ç¬¬ä¸€ç‰ˆSDKçš„ç†è§£</h3><ul>
<li><p>LVBaseView</p>
<ul>
<li><p>é€šè¿‡æŠŠåŸç”Ÿç±»å®ä¾‹æ„å»ºæˆuserdataçš„æ–¹å¼æ˜ å°„åˆ°Lua ä¸­ã€‚userdata-&gt;objectæŒ‡å‘ç±»çš„å†…å­˜ã€‚é€šè¿‡ä¸ºuserdataè®¾ç½®åŸè¡¨çš„æ–¹å¼å…³è”ç±»å®ä¾‹çš„functionã€‚</p>
</li>
<li><p>æ¯ä¸ªç±»çš„baseMemberFunctionsè¿”å›ä¸€ä¸ªç»“æ„ä½“æŒ‡é’ˆï¼Œå³ç»“æ„ä½“æ•°ç»„ï¼Œè¿”å›å½“å‰userdataå…ƒè¡¨ä¸­çš„æ‰€æœ‰funcã€‚</p>
<p>â€‹        </p>
</li>
<li><p>ä¸‹é¢å¯¹å…·ä½“çš„ä»£ç åšè§£æ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">static int hidden(lua_State *L) &#123;</span><br><span class="line"></span><br><span class="line">  // Luaè™šæ‹Ÿæ ˆçš„æ ˆåº•å§‹ç»ˆè¿”å›ä¼ å…¥çš„å¯¹è±¡æœ¬èº«çš„æŒ‡é’ˆã€‚lua_touserdata(L,index)ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºLè™šæ‹Ÿæœºï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæ ˆç›¸åº”çš„ä½ç½®ã€‚è¿”å›å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚</span><br><span class="line"></span><br><span class="line">  LVUserDataInfo * user = (LVUserDataInfo *)lua_touserdata(L, 1);</span><br><span class="line"></span><br><span class="line">  if( user )&#123;</span><br><span class="line">   // ä»å°è£…çš„userdataçš„objectæŒ‡é’ˆå–å‡ºç›¸åº”çš„åŸç”Ÿç±»å®ä¾‹</span><br><span class="line">  UIView* view = (__bridge UIView *)(user-&gt;object);</span><br><span class="line">  if( view )&#123;</span><br><span class="line">      // å¦‚æœæ ˆå†…å…ƒç´ å¤§äº2,å³è°ƒç”¨çš„ä¸ºsetæ–¹æ³•ã€‚</span><br><span class="line">      // lua_gettopè¿”å›æ ˆé¡¶å…ƒç´ çš„ç´¢å¼•ï¼Œå³è¿”å›æ ˆå†…å…ƒç´ çš„ä¸ªæ•°ã€‚</span><br><span class="line">      if ( lua_gettop(L)&gt;=2 ) &#123;</span><br><span class="line">          // æŒ‡å®šä½ç½®å…ƒç´ è½¬æ¢ä¸ºboolå€¼ã€‚</span><br><span class="line">          BOOL yes = lua_toboolean(L, 2);</span><br><span class="line">          view.hidden = yes;</span><br><span class="line">          //è®¾ç½®è¿”å›å€¼çš„ä¸ªæ•°ã€‚Luaè™šæ‹Ÿæœºä¼šæ ¹æ®è¿”å›ä¸ªæ•°ã€‚å°†æ ˆå†…æŒ‡å®šä¸ªæ•°çš„å…ƒç´ å‡ºæ ˆ</span><br><span class="line">          return 0;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">          // å‘æ ˆå†…æ¨å…¥Boolå€¼åˆ°æ ˆé¡¶</span><br><span class="line">          lua_pushboolean(L, view.hidden );</span><br><span class="line">          return 1;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">    &#125;</span><br><span class="line">return 0;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>â€‹</p>
</li>
</ul>
<p>â€‹      é€šè¿‡ä¸Šé¢çš„ä¾‹å­å¯ä»¥æ„Ÿå—åˆ°Luaé€šè¿‡æ ˆæŠŠLuaçš„å…ƒç´ ä¼ é€’è¿‡æ¥ï¼Œç„¶åå¯¹Luaç±»å‹çš„å˜é‡åšè§£æã€‚çœŸå®çš„é€»è¾‘å¤„ç†ä¾èµ–éœ€è¦å…ƒç´ å»å¤„ç†ã€‚</p>
<p>â€‹    åŸç”Ÿç±»å‹è½¬ä¸ºLuaç±»å‹ä¼ å…¥ã€‚lv_pushNativeObjectæ–¹æ³•æŠŠè¿™ä¸€è¿‡ç¨‹è¿›è¡Œå°è£…ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">void lv_pushNativeObject(lua_State* L, id value)&#123;</span><br><span class="line">   // æ£€æŸ¥æ ˆç©ºé—´å¤§å° </span><br><span class="line">    lua_checkstack(L, 4);</span><br><span class="line">    if( [value isKindOfClass:[NSString class]] ) &#123;</span><br><span class="line">        NSString* s = value;</span><br><span class="line">        // å°†const char * å‹æ ˆ</span><br><span class="line">        lua_pushstring(L, s.UTF8String);</span><br><span class="line">        return;</span><br><span class="line">    &#125; else if( [value isKindOfClass:[NSDictionary class]] ) &#123;</span><br><span class="line">        NSDictionary* dictionary = value;</span><br><span class="line">        // åˆ›å»ºä¸€ä¸ªtableå¹¶å‹æ ˆ</span><br><span class="line">        lua_newtable(L);</span><br><span class="line">        for (NSString *key in dictionary) &#123;</span><br><span class="line">            NSString* value = dictionary[key];</span><br><span class="line">            lua_checkstack(L, 4);</span><br><span class="line">            // å°†key å‹æ ˆã€‚</span><br><span class="line">            lua_pushstring(L, key.UTF8String);</span><br><span class="line">            // valueå¯¹è±¡æ˜¯idç±»å‹ã€‚éœ€è¦é€’å½’å»å¤„ç†</span><br><span class="line">            lv_pushNativeObject(L,value);</span><br><span class="line">            // æ­¤æ—¶æ ˆå†…å…ƒç´ ä¸º [str,id,table]</span><br><span class="line">            // lua_settable(L,-3)ä¸ºè®¾ç½®å¯¹åº”tableçš„keyä¸º-2çš„valueä¸ºæ ˆé¡¶å…ƒç´ ã€‚è®¾ç½®åkeyï¼Œvalueå‡ºæ ˆã€‚</span><br><span class="line">            lua_settable(L, -3);</span><br><span class="line">            // æ­¤æ—¶æ ˆå†…å…ƒç´  [table]     table =  &#123;str=id&#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return;</span><br><span class="line">    &#125; else if( [value isKindOfClass:[NSArray class]] ) &#123;</span><br><span class="line">        NSArray* array = value;</span><br><span class="line">        lua_newtable(L);</span><br><span class="line">        for (int i=0; i&lt;array.count; i++) &#123;</span><br><span class="line">            id value = array[i];</span><br><span class="line">            // æ¨å…¥numberåˆ°æ ˆä¸­</span><br><span class="line">            lua_pushnumber(L, i+1);</span><br><span class="line">            // åŒç†é€’å½’è½¬æ¢ä¸ºluaå¯è¯†åˆ«å¯¹è±¡</span><br><span class="line">            lv_pushNativeObject(L,value);</span><br><span class="line">            // åŒä¸Šã€‚[id,number,table]</span><br><span class="line">            lua_settable(L, -3);</span><br><span class="line">            // [table]         table =  &#123;1= id&#125;</span><br><span class="line">         &#125;</span><br><span class="line">        return;</span><br><span class="line">    &#125; else if( [value isKindOfClass:[NSNumber class]] ) &#123;		// åŒç†lua_pushnumber(L,num),lua_pushbooleanå°†å¯¹åº”å…ƒç´ ä½ç½®å‹æ ˆ</span><br><span class="line">        static Class boolClass = nil;;</span><br><span class="line">        if ( boolClass ==nil ) &#123;</span><br><span class="line">            boolClass = [@(YES) class];</span><br><span class="line">        &#125;</span><br><span class="line">        NSNumber* number = value;</span><br><span class="line">        if( [value class] == boolClass) &#123;</span><br><span class="line">            //  æ˜¯å¦æ˜¯boolç±»å‹</span><br><span class="line">            lua_pushboolean(L, number.boolValue);</span><br><span class="line">            return;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            lua_pushnumber(L, number.doubleValue);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;  else if( value==nil || value == [NSNull null] ) &#123;</span><br><span class="line">        </span><br><span class="line">        // lua_pushnil(L) å°†nilå…ƒç´ å‹æ ˆ</span><br><span class="line">        lua_pushnil(L);</span><br><span class="line">        return;</span><br><span class="line">    &#125; else if( [value isKindOfClass:[LVBlock class] ] ) &#123;</span><br><span class="line">        // 1ã€å°†LVBlockä¸­çš„retainKey ä½œä¸ºlightuserdataçš„æ–¹å¼å‹æ ˆ; 2.ä»æ³¨å†Œè¡¨è·å–retainKeyå¯¹åº”çš„funcï¼Œç„¶åå°†å¯¹åº”çš„Funcå‹æ ˆã€‚</span><br><span class="line">        LVBlock* block = (LVBlock*)value;</span><br><span class="line">        [block pushFunctionToStack];</span><br><span class="line">        return;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        // å°†OCå¯¹è±¡é€šè¿‡boxåŒ…è£…ä¸€ä¸‹å‹æ ˆï¼Œå‹åˆ°æ ˆå†…çš„ä¸ºuserdata,ç¨åè®²è§£è¿™ä¸ªApi</span><br><span class="line">        lv_pushNativeObjectWithBox(L, value);</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">void lv_pushNativeObjectWithBox(lua_State * L, id nativeObject )&#123;</span><br><span class="line">// å®ä¾‹åŒ–ä¸€ä¸ªBoxå¯¹è±¡é€šè¿‡nativeObject</span><br><span class="line">LVNativeObjBox* nativeObjBox = [[LVNativeObjBox alloc] init:L nativeObject:nativeObject];</span><br><span class="line">nativeObjBox.openAllMethod = YES;// æ‰€æœ‰apiéƒ½å¼€æ”¾</span><br><span class="line">// åˆ›å»ºä¸€ä¸ªuserdataå¯¹è±¡å…³è”nativeObject å¹¶å‹æ ˆ</span><br><span class="line">NEW_USERDATA(userData, NativeObject);</span><br><span class="line">// ARCä¸å¤„ç†å½“å‰å¯¹è±¡äº†ï¼ŒæŠŠå¼•ç”¨æƒåˆ©äº¤ç»™Lua GC</span><br><span class="line">userData-&gt;object = CFBridgingRetain(nativeObjBox);</span><br><span class="line">// å…³è”nativeçš„userDataä¸ºå½“å‰çš„userdataã€‚</span><br><span class="line">nativeObjBox.lv_userData = userData;</span><br><span class="line">// è·å–å…ƒè¡¨å¹¶å‹æ ˆ</span><br><span class="line">luaL_getmetatable(L, META_TABLE_NativeObject);</span><br><span class="line">// è®¾ç½®å¯¹åº”ä½ç½®çš„userDataçš„å…ƒè¡¨ä¸ºæ ˆé¡¶çš„è¡¨ã€‚</span><br><span class="line">lua_setmetatable(L, -2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>LVBaseViewä¸­æœ‰ä¸€ä¸ªæ³¨å†Œæ–¹æ³•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">+(int) lvClassDefine:(lua_State *)L globalName:(NSString*) globalName&#123;</span><br><span class="line">    // é€šè¿‡clså’ŒlvNewViewè¿™ä¸ªFuncåˆå¹¶æˆä¸€ä¸ªclosure ç„¶åå…³è”åˆ°å…¨å±€è¡¨çš„Nameä¸­ å…·ä½“å‚è€ƒä¸‹é¢çš„Api</span><br><span class="line">    [LVUtil reg:L clas:self cfunc:lvNewView globalName:globalName defaultName:@&quot;View&quot;];</span><br><span class="line">    // åˆ›å»ºmetable å¹¶å‹æ ˆ</span><br><span class="line">    lv_createClassMetaTable(L, META_TABLE_UIView);</span><br><span class="line">    // å°†ç»“æ„ä½“æ•°ç»„ã€‚å¾ªç¯ä»¥ç»“æ„ä½“çš„nameä¸ºkeyã€‚ç»“æ„ä½“çš„funcä¸ºkeyå†™å…¥metableTable</span><br><span class="line">    luaL_openlib(L, NULL, [LVBaseView baseMemberFunctions], 0);</span><br><span class="line">    // åŒç†å¦‚ä¸Šã€‚åˆ›å»ºMETA_TABLE_LuaViewåŸè¡¨</span><br><span class="line">    lv_createClassMetaTable(L, META_TABLE_LuaView);</span><br><span class="line">    // å°†LVBaseViewæ‰€æœ‰å†…å®¹å†™å…¥å…ƒè¡¨</span><br><span class="line">    luaL_openlib(L, NULL, [LVBaseView baseMemberFunctions], 0);</span><br><span class="line">    // luaViewMemberFunctionsç»“æ„ä½“æ•°ç»„å†…å®¹å†™å…¥å…ƒè¡¨</span><br><span class="line">    luaL_openlib(L, NULL, luaViewMemberFunctions, 0);</span><br><span class="line">    return 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>LVUtil  regæ–¹æ³•å¦‚ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">+(void) reg:(lua_State*)L clas:(id) c cfunc:(lua_CFunction) cfunc globalName:(NSString*)globalName defaultName:(NSString*) defaultName&#123;</span><br><span class="line">    if( defaultName || globalName ) &#123;</span><br><span class="line">        // æ£€æŸ¥æ ˆç©ºé—´å¤§å°</span><br><span class="line">        lua_checkstack(L, 12);</span><br><span class="line">        // é€šè¿‡ç±»è·å–ç±»å</span><br><span class="line">        NSString* className = NSStringFromClass(c);</span><br><span class="line">        // str å‹æ ˆ</span><br><span class="line">        lua_pushstring(L, className.UTF8String);</span><br><span class="line">        // ä¼ å…¥1åˆ™ä¼šæ ¹æ®-1ä½ç½®çš„å…ƒç´ åŠfuncç”Ÿæˆé—­åŒ…å</span><br><span class="line">        lua_pushcclosure(L, cfunc, 1);</span><br><span class="line">        // è®¾ç½®globalæˆ–è€…defaultåˆ°Luaè™šæ‹Ÿæœºçš„å…¨å±€è¡¨ã€‚å½“åœ¨Luaä¸­è°ƒç”¨Collectionçš„æ—¶å€™ä¼šæ ¹æ®keyæ‰¾åˆ°ä¼ å…¥çš„cFuncåœ°å€ã€‚ç„¶å()ä¼šè°ƒç”¨è¿™ä¸ªFuncç”Ÿæˆnative å¯¹è±¡ã€‚</span><br><span class="line">        // lua_setglobal(L,name) ä¼šå°†æ ˆé¡¶å…ƒç´ å‡ºæ ˆï¼Œå¹¶è®¾ç½®åˆ°å…¨å±€è¡¨å¯¹åº”çš„Keyã€‚</span><br><span class="line">        lua_setglobal(L, globalName ? globalName.UTF8String : defaultName.UTF8String );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>luaL_openlib()æ–¹æ³•çš„å®šä¹‰å¦‚ä¸‹</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">LUALIB_API <span class="keyword">void</span> <span class="title">luaI_openlib</span> <span class="params">(lua_State *L, <span class="keyword">const</span> <span class="keyword">char</span> *libname,</span></span></span><br><span class="line"><span class="function"><span class="params">                              <span class="keyword">const</span> luaL_Reg *l, <span class="keyword">int</span> nup)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (libname) &#123;</span><br><span class="line">    <span class="keyword">int</span> size = libsize(l);</span><br><span class="line">    <span class="comment">/* check whether lib already exists */</span></span><br><span class="line">    luaL_findtable(L, LUA_REGISTRYINDEX, <span class="string">"_LOADED"</span>, <span class="number">1</span>);</span><br><span class="line">    lua_getfield(L, <span class="number">-1</span>, libname);  <span class="comment">/* get _LOADED[libname] */</span></span><br><span class="line">    <span class="keyword">if</span> (!lua_istable(L, <span class="number">-1</span>)) &#123;  <span class="comment">/* not found? */</span></span><br><span class="line">      lua_pop(L, <span class="number">1</span>);  <span class="comment">/* remove previous result */</span></span><br><span class="line">      <span class="comment">/* try global variable (and create one if it does not exist) */</span></span><br><span class="line">      <span class="keyword">if</span> (luaL_findtable(L, LUA_GLOBALSINDEX, libname, size) != <span class="literal">NULL</span>)</span><br><span class="line">        luaL_error(L, <span class="string">"name conflict for module "</span> LUA_QS, libname);</span><br><span class="line">      lua_pushvalue(L, <span class="number">-1</span>);</span><br><span class="line">      lua_setfield(L, <span class="number">-3</span>, libname);  <span class="comment">/* _LOADED[libname] = new table */</span></span><br><span class="line">    &#125;</span><br><span class="line">    lua_remove(L, <span class="number">-2</span>);  <span class="comment">/* remove _LOADED table */</span></span><br><span class="line">    lua_insert(L, -(nup+<span class="number">1</span>));  <span class="comment">/* move library table to below upvalues */</span></span><br><span class="line">  &#125;</span><br><span class="line">    <span class="comment">// ä¸€èˆ¬libNameä¼ å…¥null</span></span><br><span class="line">  <span class="keyword">for</span> (; l-&gt;name; l++) &#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;nup; i++)  <span class="comment">/* copy upvalues to the top */</span></span><br><span class="line">      lua_pushvalue(L, -nup);</span><br><span class="line">      <span class="comment">// å‘æ ˆå†…å‹å…¥closure</span></span><br><span class="line">    lua_pushcclosure(L, l-&gt;func, nup);</span><br><span class="line">      <span class="comment">// è®¾ç½®-2ä½ç½®çš„tableã€‚æ­¤æ—¶ä¸ºå…ƒè¡¨ã€‚è®¾ç½®nameä¸ºkey,æ ˆé¡¶å…ƒç´ ä¸ºvalueï¼Œç„¶åæ ˆé¡¶å…ƒç´ å‡ºæ ˆã€‚</span></span><br><span class="line">    lua_setfield(L, -(nup+<span class="number">2</span>), l-&gt;name);</span><br><span class="line">  &#125;</span><br><span class="line">  lua_pop(L, nup);  <span class="comment">/* remove upvalues */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä»–çš„LuaSDKä¸­çš„Viewå’ŒLVBaseViewç±»ä¼¼ï¼Œå¯ä»¥ç±»æ¨ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://davidwang.club/2018/05/22/ä»£ç ä¼˜é›…è®¾è®¡/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="David">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/image/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="David's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/22/ä»£ç ä¼˜é›…è®¾è®¡/" itemprop="url">ä»£ç ä¼˜é›…è®¾è®¡</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-05-22T23:02:40+08:00">
                2018-05-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="ä»£ç è®¾è®¡"><a href="#ä»£ç è®¾è®¡" class="headerlink" title="ä»£ç è®¾è®¡"></a>ä»£ç è®¾è®¡</h3><ul>
<li>ADTS  <ul>
<li>éšè—å®ç°ç»†èŠ‚</li>
<li>æ”¹åŠ¨ä¸ä¼šå½±å“åˆ°æ•´ä¸ªç¨‹åº</li>
<li>æ›´å®¹æ˜“æé«˜æ€§èƒ½</li>
<li>è®©æ¥å£æä¾›æ›´å¤šçš„ä¿¡æ¯</li>
<li>æ˜“è¯»æ€§</li>
</ul>
</li>
<li>ä¸€ä¸ªç±»å¯ä»¥å­˜åœ¨å¤šä¸ªADT,ä½†æ˜¯è¦ä¿è¯ä»–ä»¬åœ¨åŒä¸€ä¸ªæŠ½è±¡å±‚æ¬¡ã€‚</li>
<li>æä¾›æˆå¯¹çš„æœåŠ¡ã€‚</li>
<li>æŠŠä¸ç›¸å…³çš„ä¿¡æ¯è½¬ç§»åˆ°å…¶ä»–çš„ç±»ä¸­ã€‚ å¦‚æœä¸€ä¸ªç±»ä¸­ä¸€åŠä»¥ä¸Šéƒ½æ˜¯æè¿°å…¶ä»–çš„äº‹æƒ…ï¼Œå¯ä»¥æŠŠè¿™ä¸ªç±»æŠ½è±¡å‡ºæ¥ã€‚</li>
</ul>
<ul>
<li>è‰¯å¥½çš„å°è£…<ul>
<li>å°½å¯èƒ½é™åˆ¶ç±»å’Œæˆå‘˜çš„è®¿é—®æƒé™</li>
<li>ä¸è¦æš´éœ²æˆå‘˜æ•°æ®</li>
<li>ä¸è¦å¯¹ç±»çš„ä½¿ç”¨è€…åšå‡ºä»»ä½•å‡è®¾ã€‚</li>
</ul>
</li>
<li>ç»§æ‰¿çš„ç±»çš„æ–¹æ³•å¿…é¡»å…·æœ‰ç›¸åŒçš„è¯­ä¹‰ã€‚</li>
</ul>
<h3 id="å­ç¨‹åºçš„ä¼˜é›…è®¾è®¡"><a href="#å­ç¨‹åºçš„ä¼˜é›…è®¾è®¡" class="headerlink" title="å­ç¨‹åºçš„ä¼˜é›…è®¾è®¡"></a>å­ç¨‹åºçš„ä¼˜é›…è®¾è®¡</h3><ul>
<li>åç§°çš„å¯è¯»æ€§</li>
<li>è¾“å…¥çš„å˜é‡å°½é‡ä¸ºConst é¿å…æ“ä½œå†…å­˜äº§ç”Ÿä¸€ç³»åˆ—çš„é—®é¢˜</li>
<li>é˜²å¾¡å¼ç¼–ç¨‹ã€‚</li>
<li>å‚æ•°ä¸èƒ½è¿‡å¤šã€‚</li>
<li>æ–¹æ³•åç§°Cal,Print,</li>
<li>å…³æ³¨ç¼–è¯‘å™¨ç»™çš„ç±»å‹ä¸åŒ¹é…çš„è­¦å‘Šã€‚</li>
<li>æ£€æŸ¥æ‰€æœ‰å¯èƒ½çš„è¿”å›è·¯å¾„ã€‚ç¼–å†™å‡½æ•°çš„å¼€å§‹è®¾ç½®ä¸€ä¸ªç¼ºçœå€¼ï¼Œæœ€åè¿”å›æ˜¯ä¸€ç§å¾ˆå¥½çš„åšæ³•ï¼Œè¿™ç§åšæ³•èƒ½å¤Ÿåœ¨æœªæ­£ç¡®è®¾ç½®è¿”å›å€¼çš„æ—¶å€™æä¾›ä¸€ä¸ªä¿é™©ç½‘ã€‚</li>
<li>å®ç¨‹åº å¤–å±‚åŠ å¤§æ‹¬å·ï¼Œå†…å±‚å¤šåŠ å°æ‹¬å·</li>
<li>é™¤éå¿…è¦å¦åˆ™å°‘ç”¨å®ä»£æ›¿å­ç¨‹åºï¼Œå®å‘½åçš„å¯è¯»æ€§è¾ƒå·®</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://davidwang.club/2018/05/13/ç¼–è¯‘åŸç†å­¦ä¹ /">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="David">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/image/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="David's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/13/ç¼–è¯‘åŸç†å­¦ä¹ /" itemprop="url">ç¼–è¯‘åŸç†å­¦ä¹ </a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-05-13T12:00:06+08:00">
                2018-05-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><ul>
<li><p>ç¼–è¯‘åŸç†å­¦ä¹ </p>
<ul>
<li><p>åè¯è§£é‡Š</p>
<ul>
<li>ç¿»è¯‘å™¨  translator</li>
<li><p>ç¼–è¯‘å™¨ compiler  é«˜çº§è¯­è¨€â€”&gt;ä½çº§è¯­è¨€</p>
<ul>
<li><p>è¯æ³•åˆ†æ  è¾“å…¥çš„å­—ç¬¦æµé€šè¿‡è¯æ³•åˆ†æå™¨è½¬æ¢ä¸ºè®°å·æµ</p>
<pre><code>position = initial + rate* 60
// åœ¨ç¬¦å·è¡¨ä¸­æ ¹æ®ç´¢å¼•æ‰¾åˆ°å¯¹åº”çš„å…ƒç´ 
&lt;id,1&gt; = &lt;id,2&gt; &lt;+&gt;&lt;id,3&gt;&lt;*&gt;&lt;60&gt;
</code></pre></li>
<li><p>è¯­æ³•åˆ†æ<br> ä»»ä½•ä¸€ä¸ªæ ‡è¯†ç¬¦éƒ½æ˜¯è¡¨è¾¾å¼<br> ä»»ä½•ä¸€ä¸ªæ•°éƒ½æ˜¯è¡¨è¾¾å¼<br>é€šè¿‡æ„é€ è¯­æ³•åˆ†ææ ‘ã€‚æ¥åˆ¤æ–­æŸä¸ªå¼å­æ˜¯å¦æ˜¯è¡¨è¾¾å¼<br>ä¸€èˆ¬éƒ½ä¼šæŠŠåˆ†ææ ‘è¿›è¡Œç®€åŒ–ä¸ºè¯­æ³•ğŸŒ²</p>
</li>
<li><p>è¯­ä¹‰åˆ†æ<br> è¾“å…¥çš„æ˜¯è¯­æ³•æ ‘,ç±»å‹æ£€æŸ¥åï¼Œå¦‚æœæœ‰ç±»å‹è½¬æ¢çš„è¯ä¼šæ’å…¥ä¸€äº›ç±»å‹è½¬æ¢ç›¸å…³çš„å†…å®¹ï¼Œç”Ÿæˆä¸€æ£µè¯­æ³•æ ‘</p>
</li>
<li>ä¸­é—´ä»£ç ç”Ÿæˆå™¨<br> ä»è¯­æ³•æ ‘è‡ªä¸‹è€Œä¸Šç”Ÿæˆä¸€äº›åˆ—çš„ä¸´æ—¶å˜é‡ã€‚å¾—åˆ°ä¸‰åœ°å€ä¸­é—´ä»£ç (å¯¹2ä¸ªå¯¹è±¡è¿›è¡Œæ“ä½œ,ä¿å­˜åˆ°å¦å¤–ä¸€ä¸ªä¸´æ—¶å˜é‡ä¸­)</li>
<li><p>ç‹¬ç«‹äºæœºå™¨çš„ä»£ç ä¼˜åŒ–å™¨<br>t1 = inttoreal(60)    èƒ½åœ¨ç¼–è¯‘æœŸåšçš„äº‹æƒ…ä¸è¦æ”¾åœ¨è¿è¡ŒæœŸï¼Œå¦åˆ™åƒè¿™æ ·çš„è½¬æ¢è¯­å¥ï¼Œå¦‚æœæ”¾åœ¨å¾ªç¯å½“ä¸­çš„è¯ï¼Œä¼šæ‰§è¡ŒNæ­¤ï¼Œä½†æ˜¯å¦‚æœç¼–è¯‘æœŸé—´ä¼˜åŒ–å®Œæˆçš„è¯ï¼Œåªä¼šè½¬æ¢ä¸€æ¬¡<br>å¯¹ä¸‰åœ°å€è¯­å¥çš„ä¼˜åŒ–</p>
<pre><code>t1 =  inttoreal(60)
t2 = id3* t1
t3 =id2 +t2
id1 = t3

è¿›è¡Œä»£ç ä¼˜åŒ–å™¨ä¼˜åŒ–

t2 = id3 * 60.0  //å¸¸é‡ä¼ æ’­
id1 = id2 + t2
</code></pre></li>
<li><p>ä»£ç ç”Ÿæˆå™¨<br> ä¸‰åœ°å€ä¸­é—´ä»£ç  é€šè¿‡ä»£ç ç”Ÿæˆå™¨ ç”Ÿæˆæ±‡ç¼–ä»£ç ã€‚</p>
</li>
<li>ä¾èµ–æœºå™¨çš„ä»£ç ä¼˜åŒ–å™¨</li>
<li>ç›®æ ‡æœºå™¨ä»£ç <br>  ç¬¦å·è¡¨ä¼šæŠŠå„ä¸ªé˜¶æ®µå­˜å‚¨è¿›å»</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code>  - è§£é‡Šå™¨  interpreter 

    - è§£é‡Šå™¨ä¹Ÿè¦è¿›è¡Œè¯æ³•åˆ†æã€è¯­æ³•åˆ†æã€è¯­ä¹‰åˆ†æä¸­é—´ä»£ç ç”Ÿæˆã€‚
    - è§£é‡Šå™¨ä¸ç”Ÿæˆç›®æ ‡ä»£ç ï¼Œè€Œæ˜¯ç›´æ¥æ‰§è¡Œæºç¨‹åºæ‰€æŒ‡å®šçš„è¿ç®—ã€‚
-  ç¼–è¯‘å™¨åˆ†ä¸ºå‰ç«¯å’Œåç«¯
  - ä¸­é—´ä»£ç ç”Ÿæˆ
  - åé¢ç”Ÿæˆç‰¹å®šçš„æœºå™¨ä»£ç 
- é«˜çº§è¯­è¨€çš„å®ç°
  - é«˜çº§è¯­è¨€æ›´æ˜“äºç¼–ç¨‹ï¼Œä½†æ˜¯ç¨‹åºè¿è¡Œè¾ƒæ…¢
  - ä½çº§è¯­è¨€ç¼–ç¨‹å¯ä»¥å®æ–½æ›´æœ‰æ•ˆçš„æ§åˆ¶ï¼Œå¾—åˆ°æ›´æœ‰æ•ˆçš„ä»£ç ï¼Œä½†æ˜¯éš¾äºç¼–å†™å®¹æ˜“å‡ºé”™
  - æµè¡Œçš„ç¼–ç¨‹è¯­è¨€å¤§å¤šå‘ç€æé«˜æŠ½è±¡å±‚çº§çš„æ–¹å‘å‘å±•
- é’ˆå¯¹è®¡ç®—æœºä½“ç³»ç»“æ„çš„ä¼˜åŒ–
  - è®¡ç®—æœºä½“ç³»ç»“æ„çš„ä¼˜åŒ–è¿…é€Ÿæ¼”åŒ–å¼•èµ·å¯¹æ–°çš„ç¼–è¯‘å™¨æŠ€æœ¯çš„ä¸€ç§ä¸çŸ¥è¶³çš„éœ€æ±‚ã€‚è®¡ç®—æœºä½“ç³»æœ‰æŸç§æ–°ç‰¹æ€§ï¼Œç¼–è¯‘å™¨å¿…é¡»ç»™æ”¯æŒï¼Œå¦åˆ™åªèƒ½ç¼–å†™æ±‡ç¼–ä»£ç ï¼Œæ¥è¾¾åˆ°æƒ³è¦çš„ç›®çš„ã€‚
  - ç¼–è¯‘å™¨é‡æ–°æ•´ç†æŒ‡ä»¤ï¼Œä½¿å¾—æŒ‡ä»¤çº§å¹¶è¡Œæ›´æœ‰æ•ˆ
  - ç¼–è¯‘å™¨ä»ä¼ ç»Ÿçš„ä¸²è¡Œç¨‹åºè‡ªåŠ¨ç”Ÿæˆå¹¶è¡Œç¨‹åºï¼Œä½¿ä¹‹è¿è¡Œä¸å¤šå¤„ç†å™¨ä¸Šã€‚
- æé«˜è½¯ä»¶å¼€å‘æ•ˆç‡çš„å·¥å…·
  - ç±»å‹æ£€æŸ¥ æ˜¯ä¸€ç§æ£€æŸ¥ç¨‹åºå‰åä¸ä¸€è‡´çš„æˆç†Ÿè€Œæœ‰æ•ˆçš„æŠ€æœ¯
  - è¾¹ç•Œæ£€æŸ¥ã€‚æ£€æŸ¥å‡ºä¸€éƒ¨åˆ†ç¼“å­˜åŒºç§»é™¤ï¼Œ
  - è‡ªåŠ¨çš„å†…å­˜ç®¡ç†åˆ é™¤å†…å­˜æ³„éœ²çš„ç›¸å…³é”™è¯¯ã€‚
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://davidwang.club/2018/05/12/LuaCAPIæ€»ç»“äºŒ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="David">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/image/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="David's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/12/LuaCAPIæ€»ç»“äºŒ/" itemprop="url">LuaCAPIæ€»ç»“äºŒ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-05-12T18:43:30+08:00">
                2018-05-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Lua-C-APi-æ€»ç»“"><a href="#Lua-C-APi-æ€»ç»“" class="headerlink" title="Lua C APi æ€»ç»“"></a>Lua C APi æ€»ç»“</h3><ul>
<li><p>Lua_newtable(L) åˆ›å»ºtableå¹¶æ”¾åˆ°æ ˆé¡¶</p>
</li>
<li><p>lua_pushstring(L,â€11â€) å‹å…¥key</p>
</li>
<li><p>lua_pushnumber(L,22)  å‹å…¥value</p>
</li>
<li><p>Lua_settable(L,-3)   key,valueè®¾ç½®åˆ°tableä¸­ï¼Œkey,valueå‡ºæ ˆ</p>
<p>â€‹</p>
</li>
<li><p>Lua_pushnil(L) æ ˆå†…æ¨å…¥nil</p>
</li>
<li><p>lua_pushlightuserdata(lua_Status <em>L,void </em>p) æŠŠä¸€ä¸ªuserDataå¯¹è±¡å‹æ ˆã€‚</p>
</li>
<li><p>Lua_gettable(L,LUA_REGISTRYINDEX) ä»indexæ‰¾åˆ°å¯¹åº”çš„è¡¨ï¼Œä»¥æ ˆé¡¶å…ƒç´ ä¸ºkeyï¼Œåœ¨è¡¨é‡Œé¢å»å–å€¼ï¼Œå…ˆæŠŠæ ˆé¡¶å…ƒç´ å‡ºæ ˆï¼Œç„¶åæŠŠä»è¡¨ä¸­è·å–çš„å…ƒç´ å…¥æ ˆ</p>
</li>
<li><p>Lua_settable(L,LUA_REGISTRYINDEX) å–å‡ºæŒ‡å®šindexä¸Šçš„è¡¨ï¼Œè®¾ç½®è¡¨çš„keyä¸ºæ ˆé¡¶ä¸‹çš„å€¼ï¼Œvalueä¸ºæ ˆé¡¶çš„å€¼ï¼Œè®¾ç½®å®Œæ¯•key,valueå‡ºæ ˆ</p>
</li>
<li><p>Lua_insert(L,-2) æ ˆé¡¶å…ƒç´ å’ŒæŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ äº’æ¢ä½ç½®ã€‚</p>
</li>
<li><p>Lua_pushValue(L,-1) æŠŠæ ˆä¸ŠæŒ‡å®šä½ç½®çš„ç´¢å¼•æ‹·è´ä¸€ä»½  å…¥æ ˆã€‚</p>
</li>
<li><p>lua_call(L,args) è°ƒç”¨L-&gt;top - (nrgs + 1) å¤„çš„funcã€‚å‚æ•°æ˜¯ä»å“ªä¸ªfuncå¼€å§‹å‘ä¸Šåˆ°æ ˆé¡¶</p>
</li>
<li><p>lua_pcall ç›¸æ¯”lua_call å®‰å…¨çš„luaæ–¹æ³•è°ƒç”¨</p>
</li>
<li><p>Lua_newstate(l_alloc,(__bridge void *)self) åˆ›å»ºå¹¶è¿”å›lua_Status,å¹¶ä¸”æŠŠå½“å‰selfç»‘å®šåˆ°lua_Status.L_G-&gt;ud</p>
</li>
<li><p>lua_touserdata(L,index)è¿”å›æŒ‡å®šindexä½ç½®çš„å†…å­˜</p>
</li>
<li><p>lua_next() å…ˆä»æ ˆé¡¶å¼¹å‡ºä¸€ä¸ªkeyï¼Œç„¶ååœ¨å–å‡ºæŒ‡å®šçš„table ä¸‹ä¸€å¯¹key-value  ï¼Œkeyå…ˆå…¥æ ˆï¼Œvalueå†å…¥æ ˆã€‚</p>
</li>
<li><p>lua_getfenv(L,index)æŠŠç´¢å¼•å€¼å¯¹åº”ä½ç½®çš„userDataç¯å¢ƒè¡¨å‹å…¥å †æ ˆã€‚</p>
</li>
<li><p>lua_remove(L,index) ç§»é™¤æŒ‡å®šç´¢å¼•çš„å…ƒç´ ï¼Œå½“å‰å…ƒç´ ä¸Šé¢çš„ç´¢å¼•ä¸‹ç§»</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://davidwang.club/2018/05/08/iOSå¼€å‘æ–‡æ¡£è§„èŒƒ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="David">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/image/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="David's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/08/iOSå¼€å‘æ–‡æ¡£è§„èŒƒ/" itemprop="url">iOSå¼€å‘æ–‡æ¡£è§„èŒƒ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-05-08T22:35:38+08:00">
                2018-05-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="iOS-å¼€å‘æ–‡æ¡£è§„èŒƒ"><a href="#iOS-å¼€å‘æ–‡æ¡£è§„èŒƒ" class="headerlink" title="iOS å¼€å‘æ–‡æ¡£è§„èŒƒ"></a>iOS å¼€å‘æ–‡æ¡£è§„èŒƒ</h3><ul>
<li><p>Method å‘½å</p>
<ul>
<li><p>é©¼å³°</p>
</li>
<li><p>ç±»å‰ç¼€ä½¿ç”¨ä¸‰ä¸ªå­—ç¬¦ï¼Œé¿å¼€2ä¸ªå­—ç¬¦çš„NS,UI,CG,CF,CA,WK,MK,CI,NC</p>
</li>
<li><p>ä¸€ä¸ªæ‰§è¡ŒåŠ¨ä½œä»¥åŠ¨è¯å¼€å¤´ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>(void)invokeWithTarget:(id)target</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  â€‹</span><br><span class="line"></span><br><span class="line">*  ç›´æ¥è¿”å›å†…å®¹ä¸éœ€è¦åŠ getã€‚é—´æ¥è¿”å›å†…å®¹ï¼Œæ‰éœ€è¦åŠ getã€‚æ¯”å¦‚é€šè¿‡ä¼ å…¥æŒ‡é’ˆï¼Œfuncå°†æ“ä½œæŒ‡é’ˆæ”¹å˜å†…å­˜å­˜å‚¨çš„å€¼ï¼Œå¤šä¸ªå€¼è¿”å›çš„æ—¶å€™ä½¿ç”¨get</span><br><span class="line"></span><br><span class="line">* å¦‚æœå­ç±»çš„æ–¹æ³•æ¯”çˆ¶ç±»æ›´æ˜ç¡®ã€‚æ›´æœ‰é’ˆå¯¹æ€§ã€‚ä¸åº”è¯¥é‡å†™ç±»æœ¬èº«æä¾›çš„æ–¹æ³•ï¼Œåº”è¯¥æ·»åŠ ä¸€ä¸ªæ–°çš„æ–¹æ³•</span><br></pre></td></tr></table></figure>
</li>
<li><p>Accessorå‘½åè§„èŒƒ</p>
<ul>
<li>å¯ä»¥ä½¿ç”¨will,should,can æ˜ç¡®æ–¹æ³•æ„ä¹‰ï¼Œä½†æ˜¯ä¸è¦ä½¿ç”¨do,doesè¿™ç±»æ— æ„ä¹‰çš„æƒ…æ€åŠ¨è¯ã€‚</li>
<li>delegate æ–¹æ³•é™¤éåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¦åˆ™å†’å·åŠ åˆ°ç±»ååé¢</li>
</ul>
</li>
<li><p>Initlalize è§„èŒƒ</p>
<ul>
<li>initializeç±»æ–¹æ³•å…ˆäºå…¶ä»–çš„æ–¹æ³•è°ƒç”¨ã€‚ä¸”initializeæ–¹æ³•ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªè®©ä»£ç onceã€lazyçš„åœ°æ–¹ã€‚initializeé€šå¸¸è¢«ç”¨äºè®¾ç½®classçš„ç‰ˆæœ¬å·ã€‚initializeæ–¹æ³•çš„è°ƒç”¨éµå¾ªç»§æ‰¿è§„åˆ™(æ‰€è°“ç»§æ‰¿è§„åˆ™ï¼Œç®€å•æ¥è®²æ˜¯æŒ‡ï¼šå­ç±»æ–¹æ³•ä¸­å¯ä»¥è°ƒç”¨åˆ°çˆ¶ç±»çš„åŒåæ–¹æ³•ï¼Œå³ä½¿æ²¡æœ‰è°ƒç”¨[super xxx])ã€‚å¦‚æœæˆ‘ä»¬æ²¡æœ‰å®ç°initializeæ–¹æ³•ï¼Œè¿è¡Œæ—¶åˆæ¬¡è°ƒç”¨è¿™ä¸ªç±»çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šæ²¿ç€ç»§æ‰¿é“¾(ç±»ç»§æ‰¿ä½“ç³»)ï¼Œå…ˆåç»™ç»§æ‰¿é“¾ä¸Šæ¸¸ä¸­çš„æ¯ä¸ªè¶…ç±»å‘é€ä¸€æ¡initializeæ¶ˆæ¯ï¼Œç›´åˆ°æŸä¸ªè¶…ç±»å®ç°äº†initlializeæ–¹æ³•ï¼Œæ‰ä¼šåœæ­¢å‘ä¸Šè°ƒç”¨ã€‚æŸä¸ªç±»çš„initializeæ–¹æ³•å¯èƒ½ä¼šè¢«è°ƒç”¨å¤šæ¬¡</li>
<li>å¦‚æœè¶…ç±»çš„æŸä¸ªåˆå§‹åŒ–æ–¹æ³•ä¸é€‚åˆäºå­ç±»ï¼Œå­ç±»è¦†å†™è¿™ä¸ªè¶…ç±»çš„æ–¹æ³•ï¼Œå¹¶åœ¨å…¶æŠ›å‡ºå¼‚å¸¸ã€‚ </li>
<li>ä¸è¦åœ¨å­ç±»çš„åˆå§‹åŒ–æ–¹æ³•ä¸­è°ƒç”¨çˆ¶ç±»çš„secondaryåˆå§‹åŒ–æ–¹æ³•ã€‚å¦åˆ™å®¹æ˜“é™·å…¥æ–¹æ³•è°ƒç”¨æ­»å¾ªç¯</li>
<li>ç¦æ­¢åœ¨å­ç±»ä¸­ä½¿ç”¨self è®¿é—®å±æ€§</li>
</ul>
</li>
<li><p>deallocè§„èŒƒ</p>
<ul>
<li><p>ä¸è¦å¿˜è®°åœ¨deallocæ–¹æ³•ä¸­ç§»é™¤é€šçŸ¥å’ŒKVO</p>
</li>
<li><p>deallocåº”è¯¥æ”¾åœ¨æ–‡ä»¶çš„æœ€ä¸Šé¢,å¹¶ä¸”åˆšå¥½åœ¨ @synthesize å’Œ @dynamic è¯­å¥çš„åé¢ã€‚åœ¨ä»»ä½•ç±»ä¸­ï¼Œinit éƒ½åº”è¯¥ç›´æ¥æ”¾åœ¨ dealloc æ–¹æ³•çš„ä¸‹é¢ã€‚</p>
</li>
<li><p>åœ¨deallocæ–¹æ³•ä¸­ï¼Œç¦æ­¢å°†selfä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ï¼Œå¦‚æœselfè¢«retainä½ï¼Œåˆ°ä¸‹ä¸€ä¸ªrunloopåœ¨é‡Šæ”¾ï¼Œä¼šé€ æˆå¤šæ¬¡crash.</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="keyword">void</span>)dealloc&#123;</span><br><span class="line"> [<span class="keyword">self</span> unsafeMethod:<span class="keyword">self</span>];    </span><br><span class="line"> <span class="comment">// å› ä¸ºå½“å‰å·²ç»åœ¨selfè¿™ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å¯¹è±¡çš„é”€æ¯é˜¶æ®µï¼Œé”€æ¯selfæ‰€æŒ‡å‘çš„å¯¹è±¡å·²ç»åœ¨æ‰€éš¾å…ã€‚å¦‚æœåœ¨unsafeMethod:ä¸­æŠŠselfæ”¾åˆ°äº†autorelease pollä¸­ï¼Œé‚£ä¹ˆselfä¼šè¢«retainä½ï¼Œè®¡åˆ’ä¸‹ä¸ªrunloopå‘¨æœŸåœ¨è¿›è¡Œé”€æ¯ã€‚ä½†æ˜¯deallocè¿è¡Œç»“æŸåï¼Œselfæ‰€æŒ‡å‘çš„å¯¹è±¡çš„å†…å­˜ç©ºé—´å°±ç›´æ¥è¢«å›æ”¶äº†ï¼Œä½†æ˜¯selfè¿™ä¸ªæŒ‡é’ˆè¿˜æ²¡æœ‰é”€æ¯(å³æ²¡æœ‰è¢«ç½®ä¸ºnil)ï¼Œå¯¼è‡´selfå˜æˆäº†ä¸€ä¸ªåå‰¯å…¶å®çš„é‡æŒ‡é’ˆã€‚</span></span><br><span class="line"> <span class="comment">// åˆ°äº†ä¸‹ä¸€ä¸ªrunloopå‘¨æœŸï¼Œå› ä¸ºselfæ‰€æŒ‡å‘çš„å¯¹è±¡å·²ç»è¢«é”€æ¯ï¼Œä¼šå› ä¸ºéæ³•è®¿é—®è€Œé€ æˆcrashé—®é¢˜ã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹</p>
</li>
</ul>
</li>
<li><p>blockä½¿ç”¨</p>
<ul>
<li>blockä½¿ç”¨æ—¶å¿…é¡»å¯¹blockåˆ¤ç©º</li>
<li>æ³¨æ„blockæ½œåœ¨çš„å¼•ç”¨å¾ªç¯</li>
</ul>
</li>
<li><p>å¦‚æœæƒ³è·å–windowï¼Œä¸è¦ä½¿ç”¨view.windowè·å–ï¼Œè¯·ä½¿ç”¨[[UIApplication sharedApplication] keyWindow]</p>
</li>
<li><p>åœ¨ä½¿ç”¨åˆ° UIScrollViewï¼ŒUITableViewï¼ŒUICollectionView çš„ Class ä¸­ï¼Œéœ€è¦åœ¨ dealloc æ–¹æ³•é‡Œæ‰‹åŠ¨çš„æŠŠå¯¹åº”çš„ delegate, dataSouce ç½®ä¸º nilã€‚</p>
</li>
<li><p>ä¸€äº›ç»å¸¸è¢«ä½¿ç”¨çš„æ–‡ä»¶å»ºè®®åšå¥½ç¼“å­˜ã€‚é¿å…é‡å¤çš„IOæ“ä½œã€‚å»ºè®®åªæœ‰åœ¨åˆé€‚çš„æ—¶å€™å†è¿›è¡ŒæŒä¹…åŒ–æ“ä½œã€‚</p>
</li>
<li><p>ä¸è¦ä½¿ç”¨å¯èƒ½ä¸ºnilçš„å¯¹è±¡ï¼Œå¯¹é›†åˆè¿›è¡Œåˆå§‹åŒ–ã€‚åˆå§‹åŒ–ä¹‹å‰å¯¹è±¡è¦è¿›è¡Œåˆ¤ç©ºå¤„ç†ã€‚å¦åˆ™ä¼šå‡ºç°crashã€‚</p>
</li>
<li><p>ç¦æ­¢åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ç›´æ¥è®¿é—®å¯å˜é›†åˆå¯¹è±¡ä¸­çš„å…ƒç´ ã€‚åº”è¯¥å…ˆå¯¹å…¶è¿›è¡Œcopyï¼Œç„¶åè®¿é—®ä¸å¯å˜é›†åˆå¯¹è±¡å†…çš„å…ƒç´ </p>
</li>
<li><p>blockä¸­çš„returnçš„ä½œç”¨åŸŸã€‚blockä¸­çš„returnä»£è¡¨çš„æ˜¯ä½¿å½“å‰çš„blockè¿”å›ï¼Œè€Œéä½¿å½“å‰çš„æ•´ä¸ªå‡½æ•°ä½“è¿”å›</p>
</li>
<li><p>æ‡’åŠ è½½çš„é€‚ç”¨åœºæ™¯</p>
<ul>
<li>ä¸€ä¸ªå¯¹è±¡çš„åˆ›å»ºä¾èµ–äºå…¶ä»–å¯¹è±¡ã€‚</li>
<li>é¡¹ç›®ä¸­ä½¿ç”¨æˆ–è€…ä¸ç”¨</li>
<li>ä¼´éšç€å¤§é‡çš„è®¡ç®—æˆ–è€…æ€§èƒ½æ¶ˆè€—</li>
</ul>
</li>
<li><p>å¤šçº¿ç¨‹è§„èŒƒ</p>
<ul>
<li>ç¦æ­¢ä½¿ç”¨GCDçš„dispatch_get_current_queue()å‡½æ•°è·å–å½“å‰çº¿ç¨‹ä¿¡æ¯ã€‚</li>
<li>å‰ªåˆ‡æ¿çš„è¯»å–å¿…è¦æ—¶å€™æ”¾åœ¨å¼‚æ­¥çº¿ç¨‹å¤„ç†ã€‚</li>
<li>ä»…å½“å¿…é¡»ä¿è¯é¡ºåºçš„æ—¶å€™é‡‡ç”¨dispatch_sync,å¦åˆ™å®¹æ˜“å‡ºç°æ­»é”ï¼Œåº”é¿å…åº”ç”¨ä½¿ç”¨dispatch_asyncã€‚</li>
</ul>
</li>
<li><p>å†…å­˜ç®¡ç†è§„èŒƒ</p>
<ul>
<li>é™¤éçŸ¥é“è‡ªå·±åšä»€ä¹ˆï¼Œå¦åˆ™ä¸å»ºè®®å°†UIViewç±»çš„å¯¹è±¡åŠ å…¥åˆ°NSArrayã€NSDictionaryã€NSSetä¸­ã€‚å¦‚æœ‰éœ€è¦å¯ä»¥æ·»åŠ åˆ°NSMapTable å’Œ NSHashTable</li>
</ul>
</li>
<li><p>å»¶è¿Ÿè°ƒç”¨è§„èŒƒã€‚</p>
<p>ã€å¿…é¡»ã€‘performSelector:withObject:afterDelay:è¦åœ¨æœ‰Runloopçš„çº¿ç¨‹é‡Œè°ƒç”¨ï¼Œå¦åˆ™è°ƒç”¨æ— æ³•ç”Ÿæ•ˆã€‚</p>
</li>
</ul>
<p>â€‹    è¯´æ˜ï¼šå¼‚æ­¥çº¿ç¨‹é»˜è®¤æ˜¯æ²¡æœ‰runloopçš„ï¼Œé™¤éæ‰‹åŠ¨åˆ›å»ºï¼›è€Œä¸»çº¿ç¨‹æ˜¯ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºRunloopçš„ã€‚æ‰€ä»¥åœ¨å¼‚æ­¥çº¿ç¨‹è°ƒç”¨æ˜¯è¯·å…ˆç¡®ä¿è¯¥çº¿ç¨‹æ˜¯æœ‰Runloopçš„ã€‚</p>
<ul>
<li>.hå°½é‡ä¸è¦æš´éœ²å±æ€§ã€‚å±æ€§æš´éœ²åªè¯»çš„ï¼Œ.hæ–‡ä»¶ä¸­åªæš´éœ²å‡ºä¸€äº›å¿…è¦çš„ç±»ã€å…¬å¼€çš„æ–¹æ³•ã€åªè¯»å±æ€§ï¼›ç§æœ‰ç±»ã€ç§æœ‰æ–¹æ³•å’Œç§æœ‰å±æ€§ä»¥åŠæˆå‘˜å˜é‡ï¼Œå°½é‡å†™åœ¨.mæ–‡ä»¶ä¸­</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://davidwang.club/2018/05/05/SQLæŸ¥è¯¢è¯­å¥åŸºæœ¬ä½¿ç”¨/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="David">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/image/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="David's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/05/SQLæŸ¥è¯¢è¯­å¥åŸºæœ¬ä½¿ç”¨/" itemprop="url">SQLæŸ¥è¯¢è¯­å¥åŸºæœ¬ä½¿ç”¨</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-05-05T22:15:29+08:00">
                2018-05-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="SQLç³»ç»Ÿå­¦ä¹ "><a href="#SQLç³»ç»Ÿå­¦ä¹ " class="headerlink" title="SQLç³»ç»Ÿå­¦ä¹ "></a>SQLç³»ç»Ÿå­¦ä¹ </h3><ul>
<li>SELECTæ•°æ®æŸ¥è¯¢æ“ä½œ(æ£€ç´¢ä¸€åˆ—SELECT name from table) <ul>
<li>åœ¨ä¸€ä¸ªè¡¨ä¸­æŸ¥è¯¢æŸä¸ªå­—æ®µ SELECT name from tableã€‚è¿™ä¸ªæŸ¥è¯¢è¯­å¥å¯ä»¥è¾“å‡ºè¡¨ä¸­ä¸ºnameå­—æ®µçš„æ‰€æœ‰å€¼</li>
<li>å¤šæ¡SQLè¯­å¥ä½¿ç”¨;åˆ†å‰²å¼€ã€‚å¯ä»¥åŒæ—¶æŸ¥è¯¢å¤šæ¡</li>
<li>å¯¹å…³é”®å­—ä½¿ç”¨å¤§å†™ï¼Œå¯¹åˆ—å’Œè¡¨ä½¿ç”¨å°å†™</li>
<li>å¤„äºSQLæ—¶å€™ä¸åŒºåˆ†ç©ºæ ¼ã€‚æ‰€æœ‰çš„ç©ºæ ¼éƒ½å¯ä»¥è¢«å¿½ç•¥ï¼ŒSQLå¯ä»¥å†™æˆä¸€è¡Œï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å†™æˆå¤šè¡Œã€‚ä½œç”¨æ˜¯ä¸€æ ·çš„</li>
</ul>
</li>
<li>SELECTæ£€ç´¢å¤šåˆ—(SELECT name,age from table)<ul>
<li>æ£€ç´¢å¤šåˆ—ï¼Œè¦ä½¿ç”¨,åˆ†å‰²ï¼Œæœ€åä¸€åˆ—ä¸éœ€è¦ä½¿ç”¨,åˆ†å‰²ã€‚</li>
<li>SQLè¯­å¥è¿”å›çš„æ˜¯åŸå§‹çš„æ•°æ®,æ— æ ¼å¼çš„æ•°æ®ã€‚æ•°æ®çš„æ ¼å¼æ˜¯è¡¨ç¤ºé—®é¢˜ï¼Œè€Œä¸æ˜¯æ£€ç´¢é—®é¢˜ã€‚</li>
</ul>
</li>
<li>SELECT æ£€ç´¢å‡ºæ‰€æœ‰åˆ—(SELECT * FROM table)<ul>
<li>æ£€ç´¢å‡ºæ‰€æœ‰åˆ—ï¼Œä½†æ˜¯å¦‚æœæ˜ç¡®å­—æ®µåçš„æƒ…å†µä¸‹ï¼Œå°½é‡ä¸è¦è¿™ä¹ˆä½¿ç”¨ã€‚ç›´æ¥ä½¿ç”¨åˆ—åï¼Œå› ä¸ºè¿™æ ·ä¼šé™ä½æ£€ç´¢å’Œåº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚</li>
<li>ç›´æ¥ä½¿ç”¨é€šé…ç¬¦çš„æƒ…å†µï¼Œå¯ä»¥æ£€ç´¢å‡ºæœªçŸ¥åˆ—ã€‚</li>
</ul>
</li>
<li>SELECT DISTINCT age FROM table æ£€ç´¢ä¸åŒçš„å€¼<ul>
<li>ä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œå…³é”®å­—ä½œç”¨äºæ‰€æœ‰çš„åˆ—ã€‚ä¸ä»…ä»…æ˜¯è·Ÿåœ¨å…³é”®å­—åé¢çš„é‚£ä¸€åˆ—ã€‚</li>
</ul>
</li>
<li>å¯¹SELECT è¿”å›çš„æ•°æ®çš„æ•°é‡è¿›è¡Œé™åˆ¶,ä¸åŒçš„DBMSä¸åŒï¼Œæˆ‘ä»¬è®°ä¸‹ä½¿ç”¨æœ€å¤šçš„MySQL,<ul>
<li>SELECT name FROM table LIMIT 5   é™åˆ¶æŸ¥è¯¢ä¸è¶…è¿‡5æ¡æ•°æ®</li>
<li>SELECT name FROM table LIMIT 5 OFFSET 5  OFFSETé™åˆ¶ä»ç¬¬å…­æ¡å¼€å§‹æŸ¥è¯¢(OFFSET å°±æ˜¯å‰é¢çš„éƒ½pass)ï¼ŒæŸ¥è¯¢ä¸è¶…è¿‡5æ¡æ•°æ®</li>
<li>MySQL æ”¯æŒç®€åŒ–çš„å†™æ³• LIMIT 3,4   ,åé¢æ˜¯é™åˆ¶çš„æ•°é‡ã€‚é€—å·å‰é¢æ˜¯åç§»é‡</li>
</ul>
</li>
<li>SELECT name FROM table ORDER_BY age   éœ€è¦æ³¨æ„ORDER_BYå¿…é¡»æ˜¯æœ€åä¸€æ¡å­å¥ã€‚</li>
<li>SELECT name,age FROM table ORDER_BY age,name éœ€æ±‚æ˜¯ä¸åªæ˜¯æŒ‰ç…§ä¸€ä¸ªåˆ—è¿›è¡Œæ’åºã€‚æ­¤æ—¶æ’åºæ˜¯é¡ºåºçš„ï¼Œå¦‚æœå‰é¢èƒ½æ‹æ’å‡ºç»“æœï¼Œåˆ™åé¢çš„å­—æ®µä¸ä¼šåŠ å…¥æ’åºã€‚</li>
<li>SELECT name,age FROM table ORDER_BY 2,3 æŒ‰ç…§ç›¸å¯¹åˆ—çš„ä½ç½®è¿›è¡Œæ’åºã€‚</li>
<li>DESCæŒ‡å®šæ’åºæ–¹å¼ï¼Œé»˜è®¤æ˜¯å‡åºæ’åºã€‚ä½†æ˜¯å¦‚æœéœ€è¦é™åºæ’åºçš„è¯ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡æ˜ã€‚<ul>
<li>SELECT name,age FROM table ORDER_BY  age DESC,name</li>
<li>é»˜è®¤éƒ½æ˜¯å‡åºï¼Œå¦‚æœæƒ³è®©å…¶ä»–åˆ—ä¹Ÿé™åºéœ€è¦æ˜¾ç¤ºæŒ‡æ˜ã€‚SELECT name,age FROM table ORDER_BY  age DESC,name DESC</li>
</ul>
</li>
</ul>
<ul>
<li>è¿‡æ»¤æ•°æ®ä½¿ç”¨WHEREã€‚<ul>
<li>SELECT name,age FROM table WHERE name = â€˜davidâ€™</li>
<li>SELECT name,age FROM table WHERE name = â€˜davidâ€™ ORDER_BY age DESC  è¿‡æ»¤è¯­æ³•ï¼ŒORDER_BYä¹Ÿéœ€è¦ä½äºæœ€å</li>
<li>å­å¥æ“ä½œç¬¦,&gt; &lt;=,!=ç­‰ SELECT name,age FROM table WHERE age&gt;=18</li>
<li>èŒƒå›´æ£€æŸ¥ã€‚ SELECT name,age FROM table WHERE age BETWEEN 10 AND 15ã€‚æ— è®ºä»€ä¹ˆå­å¥ï¼Œåªæœ‰æ˜¯çº¦æŸæ¡ä»¶é™åˆ¶ï¼Œè‚¯å®šè¦åŠ ä¸ŠWHERE.</li>
<li>æ˜¯å¦ä¸ºç©ºå€¼æ£€æŸ¥ã€‚SELECT name,age FROM table WHERE age IS NULLã€‚</li>
</ul>
</li>
<li>é«˜çº§è¿‡æ»¤ã€‚åŒæ—¶æ»¡è¶³å¤šä¸ªæ¡ä»¶çš„è¿‡æ»¤ã€‚<ul>
<li>SELECT name,age FROM table WHERE age&gt;10 AND name==â€™davidâ€™ï¼ŒANDå…³é”®å­—å¿…é¡»æ¡ä»¶éƒ½æ»¡è¶³æ‰å¯ä»¥è¿”å›æ•°æ®</li>
<li>ORå…³é”®å­—ï¼Œå½“ç¬¬ä¸€ä¸ªæ¡ä»¶æ»¡è¶³æ—¶ï¼Œä¸ç®¡ç¬¬äºŒä¸ªæ»¡ä¸æ»¡è¶³éƒ½ä¼šè¿”å›ã€‚SELECT name,age FROM table WhERE age&gt;10 OR name == â€˜davidâ€™</li>
<li>åœ¨And å’Œ ORéƒ½å­˜åœ¨çš„SQLå°½é‡ä½¿ç”¨æ‹¬å·æ¥æ¶ˆé™¤æ­§ä¹‰ã€‚Andçš„ä¼˜å…ˆçº§é«˜äºOR. SELECT prod_name,prod_price FROM Products WHERE (vend_id= â€˜DLL01â€™ OR vend_id = â€˜BRSO1â€™) AND prod_price&gt;10</li>
<li>INå…³é”®å­—ï¼Œä½œç”¨ç­‰åŒäºORï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ¡ä»¶æ»¡è¶³ï¼Œä¸ä¼šå»åŒ¹é…ç¬¬äºŒä¸ªæ¡ä»¶ã€‚SELECT name,price FROM products WHERE id  in (â€˜DLL01â€™,â€™BRS01â€™) ORDER BY nameã€‚ç­‰ä»·äºSELECT name,price FROM products WHERE id = â€˜DLL01â€™ OR id = â€˜BRS01â€™ ORDER BY name;  <ul>
<li>INæœ‰ä»¥ä¸‹å¥½å¤„</li>
<li>æŸ¥è¯¢é€Ÿåº¦æ›´å¿«</li>
<li>å¯ä»¥åŒ…å«å…¶ä»–çš„SELECTè¯­å¥ã€‚</li>
<li>æ›´æ¸…æ¥šç›´è§‚ï¼Œå®¹æ˜“ç®¡ç†ã€‚</li>
</ul>
</li>
<li>NOTå…³é”®å­—ã€‚å¦å®šåé¢çš„è¡Œä¸ºï¼Œç®€å•çš„SQLè¯­å¥ç­‰ä»·äº!= æˆ–è€…&lt;&gt;ã€‚ä½†æ˜¯åœ¨ä¸€äº›å¤æ‚çš„è¯­å¥ï¼Œå®ƒçš„ä¼˜åŠ¿å¯ä»¥å¾—ä»¥ä½“ç°ã€‚åœ¨ä¸INè”åˆä½¿ç”¨çš„æ—¶å€™ï¼ŒNOTå¯ä»¥éå¸¸ç®€å•çš„æ‰¾å‡ºä¸æ¡ä»¶åˆ—è¡¨ä¸åŒ¹é…çš„è¡Œã€‚</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://davidwang.club/2018/04/21/New-Test/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="David">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/image/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="David's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/21/New-Test/" itemprop="url">UIColorã€CIColorã€CGColoré™†ç»­è¡¥å……ä¸­ã€‚</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-04-21T12:17:59+08:00">
                2018-04-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>CGColorRef ç”± CGColorSpaceRefå’ŒComponentsç»„æˆ</p>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">UIColor *color = [UIColor redColor];</span><br><span class="line">    CGColorRef colorRef =   color.CGColor;</span><br><span class="line">    CGColorSpaceRef spaceRef =   CGColorGetColorSpace(colorRef);</span><br><span class="line">    CGFloat *floats = CGColorGetComponents(colorRef);</span><br><span class="line">    size_t numbers =  CGColorGetNumberOfComponents(colorRef);</span><br><span class="line">    for (int i = 0; i&lt;numbers; i++) &#123;</span><br><span class="line">        CGFloat number = floats[i];</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</code></pre></li>
<li><p>UIColorçš„CGColorä¸€ç›´æ˜¯æœ‰æ•ˆçš„ã€‚ä½†æ˜¯CIColorä¸ä¸€å®šã€‚åªæœ‰å½“UIColoræ˜¯é€šè¿‡CIColoråˆ›å»ºçš„æ—¶å€™ï¼Œä»–æ‰æ˜¯æœ‰æ•ˆçš„ï¼Œå¦åˆ™è®¿é—®è¯¥å±æ€§å°†ä¼šæŠ›å‡ºå¼‚å¸¸</p>
</li>
<li><p>UIColoré€šè¿‡CGColoråˆ›å»ºçš„æ—¶å€™ã€‚CGColorä¼šåŸå°ä¸åŠ¨çš„ä¿å­˜ã€‚UIColorå®é™…æ˜¯ä¿å­˜äº†ä¸€ä»½CGColorRefå¯¹è±¡ã€‚</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CGColorSpaceRef</span> spaceRef2 =   <span class="built_in">CGColorSpaceCreateDeviceCMYK</span>();</span><br><span class="line"><span class="built_in">CGFloat</span> *number2 = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;;</span><br><span class="line"><span class="built_in">CGColorRef</span> colorRef2  =   <span class="built_in">CGColorCreate</span>(spaceRef2, number2);</span><br><span class="line"><span class="built_in">CGColorSpaceRelease</span>(spaceRef2);</span><br><span class="line"><span class="built_in">UIColor</span> *color2 = [<span class="built_in">UIColor</span> colorWithCGColor:colorRef2];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,color2.CGColor)</span><br></pre></td></tr></table></figure>
</li>
<li><p>é€šè¿‡UIColoræ‹¿åˆ°hex_String.</p>
 <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSString</span> *)lua_toHexString</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">CGFloat</span> *components = <span class="built_in">CGColorGetComponents</span>(<span class="keyword">self</span>.CGColor);</span><br><span class="line">    <span class="built_in">CGFloat</span> r = components[<span class="number">0</span>];</span><br><span class="line">    <span class="built_in">CGFloat</span> g = components[<span class="number">1</span>];</span><br><span class="line">    <span class="built_in">CGFloat</span> b = components[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"#%02lX%02lX%02lX"</span>,</span><br><span class="line">            lroundf(r * <span class="number">255</span>),</span><br><span class="line">            lroundf(g * <span class="number">255</span>),</span><br><span class="line">            lroundf(b * <span class="number">255</span>)];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://davidwang.club/2018/04/19/ä½ å¥½-ç‹å®/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="David">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/image/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="David's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/19/ä½ å¥½-ç‹å®/" itemprop="url">LuaCå¸¸ç”¨Api</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-04-19T14:56:35+08:00">
                2018-04-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>Lua_gettop(lua_State *)  è·å–æ ˆé¡¶å…ƒç´ çš„ç´¢å¼•ï¼Œå³è·å–æ ˆå†…å…ƒç´ çš„ä¸ªæ•°</p>
</li>
<li><p>lua_type(lua_State *,int) è·å–æ ˆä¸­æŒ‡å®šç´¢å¼•çš„ç±»å‹</p>
</li>
<li><p>lua_pushstring(lua_State *,â€nameâ€) å‘æ ˆå†…å‹å…¥ä¸€ä¸ªnameå­—ç¬¦ä¸²</p>
</li>
<li><p>lua_isstring(lua_State <em>,index) åˆ¤æ–­æ ˆå†…æŒ‡å®šç´¢å¼•çš„å…ƒç´ æ˜¯å¦æ˜¯stringç±»å‹ã€‚åŒç†lua_isnumber(lua_State </em>,index)åˆ¤æ–­æ ˆå†…æŒ‡å®šç´¢å¼•çš„å…ƒç´ æ˜¯å¦æ˜¯numberç±»å‹</p>
</li>
<li><p>åŒç†å¯¹åº”ç€2ä¸ªè½¬æ¢æ–¹æ³•lua_tostring(lua_State <em>,index) è¿”å›const char </em>ç±»å‹ã€‚lua_tonumber(lua_State *,index)è¿”å›æŒ‡å®šç´¢å¼•ä¸ºintã€‚</p>
<p>toçš„æ–¹å¼ä¸ä¼šå‡ºæ ˆã€‚</p>
</li>
<li><p>lua_settop(lua_State * ,index) indexå€¼å¯ä»¥ç›¸å¯¹æ ˆé¡¶å’Œæ ˆå°¾åšå‚è€ƒã€‚æ ˆé¡¶çš„è¯ä¸ºè´Ÿå€¼ï¼Œæ¯”å¦‚lua_settop(L,-2)åˆ™æ¸…é™¤æ ˆé¡¶å…ƒç´ ,æ¯”å¦‚æ ˆå†…æœ‰5ä¸ªå…ƒç´ ï¼Œlua_settop(L,4)ä¹Ÿä»£è¡¨å»é™¤æ ˆé¡¶å…ƒç´ ã€‚</p>
</li>
<li><p>å…¶ä»–çš„ä¸€äº›æ ˆæ“ä½œ</p>
<ul>
<li>lua_pushValueï¼ˆlua_State * ,indexï¼‰å°†æŒ‡å®šç´¢å¼•ä¸Šçš„å€¼çš„å‰¯æœ¬å…¥æ ˆ</li>
<li>lua_remove(lua_State * ,index) ç§»é™¤indexç´¢å¼•ä¸Šçš„å€¼</li>
<li>lua_insert(lua_State * ,index)å¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œå¹¶æ’å…¥åˆ°æŒ‡å®šä½ç½®</li>
<li>Lua_replace(lua_State * ,index)å¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œå¹¶æ›¿æ¢æŒ‡å®šä½ç½®çš„å€¼</li>
</ul>
</li>
<li><p>lua_pop(lua_State * ,number)  å‡ºæ ˆçš„ä¸ªæ•°</p>
</li>
<li><p>lua_getField(L,index,key) ç›¸å½“äºlua_pushstring(L,â€nameâ€) + lua_gettable(L,-2) ç›¸å½“äºnameå…ˆå…¥æ ˆï¼Œç„¶åä»ç´¢å¼•ä¸º-2çš„ä½ç½®å–tableï¼Œåœ¨tableæŸ¥key,å°†æŸ¥æ‰¾ç»“æœå…¥æ ˆã€‚ lua_getfield(l,inde,key) åŒç†åœ¨æŒ‡å®šä½ç½®å–è¡¨ï¼Œç„¶åé€šè¿‡keyåœ¨è¡¨ä¸­æŸ¥è¯¢ï¼Œå°†æŸ¥è¯¢ç»“æœå…¥æ ˆï¼Œä¸ºnilä¹Ÿå…¥æ ˆã€‚</p>
</li>
<li><p>lua_pcall(L, 0, 0, 0); æ ˆå†…å¯¹è±¡å»æ‰§è¡Œæ ˆé¡¶çš„func</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://davidwang.club/2018/04/19/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="David">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/image/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="David's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/19/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-04-19T14:51:46+08:00">
                2018-04-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/image/logo.jpg"
                alt="David" />
            
              <p class="site-author-name" itemprop="name">David</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/yourname" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:yourname@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://plus.google.com/yourname" target="_blank" title="Google">
                      
                        <i class="fa fa-fw fa-google"></i>Google</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://twitter.com/yourname" target="_blank" title="Twitter">
                      
                        <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.facebook.com/yourname" target="_blank" title="FB Page">
                      
                        <i class="fa fa-fw fa-facebook"></i>FB Page</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://vk.com/yourname" target="_blank" title="VK Group">
                      
                        <i class="fa fa-fw fa-vk"></i>VK Group</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://stackoverflow.com/yourname" target="_blank" title="StackOverflow">
                      
                        <i class="fa fa-fw fa-stack-overflow"></i>StackOverflow</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://youtube.com/yourname" target="_blank" title="YouTube">
                      
                        <i class="fa fa-fw fa-youtube"></i>YouTube</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://instagram.com/yourname" target="_blank" title="Instagram">
                      
                        <i class="fa fa-fw fa-instagram"></i>Instagram</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="skype:yourname?call|chat" target="_blank" title="Skype">
                      
                        <i class="fa fa-fw fa-skype"></i>Skype</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">David</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div style="margin:-20px;position: absolute;right:265px;">
<dl style="float:left">
  <dt style="float:left">
    <dd style="float:left;width:300px">
      <span style="float:right">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span>
      <span style="float:right">æœ¬ç«™æ€»è®¿é—®é‡<span><span style="float:right" id="busuanzi_value_site_pv"></span>
    </dd>
  </dt>
  <dt style="float:left;width:300px">
    <dd>
      <span style="float:left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
      <span style="float:left">æ‚¨æ˜¯ç¬¬</span>
      <span style="float:left" id="busuanzi_value_site_uv"></span>
      <span style="float:left">ä¸ªå°ä¼™ä¼´</span>
      <span>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;</span>
      <span id="showDays"></span>
    </dd>
  </dt>
</dl>
</div>

<script>
  var birthDay = new Date('04/21/2018');
  var now = new Date();
  var duration = now.getTime() - birthDay.getTime();
  var total= Math.floor(duration / (1000 * 60 * 60 * 24));
  document.getElementById('showDays').innerHTML='æœ¬ç«™å·²è¿è¡Œ' + total + 'å¤©';
</script>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
